{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\products\\\\Products.js\";\nimport React, { Component, Fragment } from 'react';\nimport Product from './Product';\nimport { connect } from 'react-redux';\nimport { getProducts } from '../../actions/productActions';\nimport LoadingSpinner from '../utils/LoadingSpinner';\nimport ProductsHeader from './ProductHeader';\n\nvar Products =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Products, _Component);\n\n  function Products() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Products);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Products)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      filteredProducts: [],\n      keyword: '',\n      products: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputChangeHandler\", function (e) {\n      var keyword = e.target.value;\n\n      var filteredProducts = _this.state.products.filter(function (product) {\n        return product.name.toLowerCase().includes(keyword.toLowerCase().trim()) || product.description.toLowerCase().includes(keyword.toLowerCase().trim());\n      });\n\n      _this.setState({\n        filteredProducts: filteredProducts,\n        keyword: keyword\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Products, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getProducts();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.products !== this.props.products) {\n        this.setState({\n          products: this.props.products.products\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          products = _this$state.products,\n          filteredProducts = _this$state.filteredProducts;\n\n      if (!products || products.length < 1) {\n        return React.createElement(\"div\", {\n          className: \"products__loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, \"Loading Products\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, \"Try reloading page if loading persists...\"), React.createElement(LoadingSpinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }));\n      } else {\n        var productsToLoop = this.state.keyword === '' ? products : filteredProducts;\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(ProductsHeader, {\n          inputChangeHandler: this.inputChangeHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"products\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, this.state.keyword !== '' && this.state.filteredProducts.length === 0 ? React.createElement(\"div\", {\n          className: \"products__noResults\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \" Sorry, no results found!  \") : productsToLoop.map(function (product) {\n          return React.createElement(Product, {\n            key: product._id,\n            id: product._id,\n            name: product.name,\n            description: product.description,\n            longDescription: product.longDescription,\n            imageUrl: product.imageUrl,\n            price: product.price,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            },\n            __self: this\n          });\n        })));\n      }\n    }\n  }]);\n\n  return Products;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.products\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getProducts: getProducts\n})(Products);","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\products\\Products.js"],"names":["React","Component","Fragment","Product","connect","getProducts","LoadingSpinner","ProductsHeader","Products","filteredProducts","keyword","products","e","target","value","state","filter","product","name","toLowerCase","includes","trim","description","setState","props","prevProps","length","productsToLoop","inputChangeHandler","map","_id","longDescription","imageUrl","price","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport Product from './Product';\r\nimport { connect } from 'react-redux';\r\nimport { getProducts } from '../../actions/productActions';\r\nimport LoadingSpinner from '../utils/LoadingSpinner';\r\nimport ProductsHeader from './ProductHeader';\r\n\r\n\r\nclass Products extends Component {\r\n    state = {\r\n        filteredProducts: [],\r\n        keyword: '',\r\n        products: []\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.props.getProducts();\r\n        \r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if(prevProps.products !== this.props.products){\r\n            this.setState({products: this.props.products.products})\r\n        }\r\n      \r\n    }\r\n    inputChangeHandler = (e) => {\r\n    \r\n        const keyword = e.target.value;\r\n        const filteredProducts = this.state.products.filter(product => (\r\n            product.name.toLowerCase().includes(keyword.toLowerCase().trim()) ||\r\n            product.description.toLowerCase().includes(keyword.toLowerCase().trim())\r\n\r\n        ))\r\n        this.setState({filteredProducts,keyword});\r\n    }\r\n    \r\n    \r\n    render() {\r\n        const { products,filteredProducts } = this.state;\r\n\r\n        if( !products || products.length < 1 ) {\r\n            return (\r\n                <div className = \"products__loading\">\r\n                    <div>\r\n                        Loading Products\r\n                    </div>\r\n                    <div>Try reloading page if loading persists...</div>\r\n                    <LoadingSpinner/>\r\n                </div>\r\n            ) \r\n        }\r\n        else {\r\n            const productsToLoop = this.state.keyword === '' ? products : filteredProducts\r\n            return (\r\n            <Fragment>\r\n                    <ProductsHeader inputChangeHandler = { this.inputChangeHandler }/>\r\n                    <div className = \"products\">\r\n                    {\r\n                        this.state.keyword !== '' && this.state.filteredProducts.length === 0 ? \r\n                            <div className = \"products__noResults\"> Sorry, no results found!  </div>\r\n                        :\r\n                        productsToLoop.map(product=>(\r\n                            <Product\r\n                                key = {product._id}\r\n                                id = {product._id}\r\n                                name = {product.name}\r\n                                description = {product.description}\r\n                                longDescription = {product.longDescription}\r\n                                imageUrl = {product.imageUrl}\r\n                                price = {product.price}\r\n                            />\r\n                        ))\r\n                    }\r\n                    </div>\r\n     \r\n            </Fragment>\r\n            );\r\n        }\r\n       \r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    products: state.products\r\n})\r\nexport default connect(mapStateToProps , { getProducts })(Products);"]},"metadata":{},"sourceType":"module"}