{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\orders\\\\UserOrders.js\";\nimport React, { Component } from 'react';\nimport UserOrder from './UserOrder';\nimport { connect } from 'react-redux';\nimport { getOrders } from '../../actions/orderActions';\nimport LoadingSpinner from '../utils/LoadingSpinner';\n\nvar UserOrders =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserOrders, _Component);\n\n  function UserOrders() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserOrders);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserOrders)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      filteredOrders: [],\n      keyword: '',\n      orders: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputChangeHandler\", function (e) {\n      var keyword = e.target.value;\n\n      var filteredOrders = _this.state.orders.filter(function (order) {\n        return order._id.toLowerCase().includes(keyword.toLowerCase().trim()) || order.user.name.toLowerCase().includes(keyword.toLowerCase().trim());\n      });\n\n      _this.setState({\n        filteredOrders: filteredOrders,\n        keyword: keyword\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(UserOrders, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getOrders();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (prevProps.order !== this.props.order) {\n        this.setState({\n          orders: this.props.order.orders\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          orders = _this$state.orders,\n          filteredOrders = _this$state.filteredOrders,\n          keyword = _this$state.keyword;\n      console.log(orders);\n\n      if (!orders || orders.length < 1) {\n        return React.createElement(\"div\", {\n          className: \"orders__loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, \"Loading Orders\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, \"Try reloading page if loading persists...\"), React.createElement(LoadingSpinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }));\n      } else {\n        var ordersToLoop = keyword === '' ? orders : filteredOrders;\n        return React.createElement(\"div\", {\n          className: \"orders-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          onChange: this.inputChangeHandler,\n          className: \"orders__input\",\n          type: \"text\",\n          placeholder: \"Search for orders\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"orders\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, this.state.keyword !== '' && this.state.filteredOrders.length === 0 ? React.createElement(\"div\", {\n          className: \"orders__noResults\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \" Sorry, no results found!  \") : ordersToLoop.map(function (order) {\n          return React.createElement(UserOrder, {\n            key: order._id,\n            orderId: order._id,\n            orderDate: order.orderDate,\n            products: order.products,\n            orderedBy: order.user.name,\n            totalPrice: order.totalPrice,\n            totalQuantity: order.totalQuantity,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          });\n        })));\n      }\n    }\n  }]);\n\n  return UserOrders;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    order: state.order\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getOrders: getOrders\n})(UserOrders);","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\orders\\UserOrders.js"],"names":["React","Component","UserOrder","connect","getOrders","LoadingSpinner","UserOrders","filteredOrders","keyword","orders","e","target","value","state","filter","order","_id","toLowerCase","includes","trim","user","name","setState","props","prevProps","prevState","console","log","length","ordersToLoop","inputChangeHandler","map","orderDate","products","totalPrice","totalQuantity","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport UserOrder from './UserOrder';\r\nimport { connect } from 'react-redux';\r\nimport { getOrders } from '../../actions/orderActions';\r\nimport LoadingSpinner from '../utils/LoadingSpinner';\r\n\r\n\r\nclass UserOrders extends Component {\r\n    state = {\r\n        filteredOrders: [],\r\n        keyword: '',\r\n        orders: []\r\n    }\r\n    \r\n\r\n    componentDidMount() {\r\n        this.props.getOrders();\r\n        \r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if(prevProps.order !== this.props.order){\r\n            this.setState({orders: this.props.order.orders})\r\n        }\r\n      \r\n    }\r\n    inputChangeHandler = (e) => {\r\n        const keyword = e.target.value;\r\n        const filteredOrders = this.state.orders.filter(order => (\r\n            order._id.toLowerCase().includes(keyword.toLowerCase().trim()) ||\r\n            order.user.name.toLowerCase().includes(keyword.toLowerCase().trim())\r\n\r\n        ))\r\n        this.setState({filteredOrders,keyword});\r\n    }\r\n\r\n    \r\n    \r\n    render() {\r\n        const {orders, filteredOrders,keyword} = this.state;\r\n        console.log(orders);\r\n \r\n        if( !orders || orders.length < 1 ) {\r\n            return (\r\n                <div className = \"orders__loading\">\r\n                    <div>\r\n                        Loading Orders\r\n                    </div>\r\n                    <div>Try reloading page if loading persists...</div>\r\n                    <LoadingSpinner/>\r\n                </div>\r\n            ) \r\n        }\r\n        else {\r\n            const ordersToLoop = keyword === '' ? orders : filteredOrders\r\n            return (\r\n                <div className = \"orders-container\">\r\n                    <input onChange = { this.inputChangeHandler } className = \"orders__input\" type=\"text\" placeholder = \"Search for orders\"/>\r\n                    <div className = \"orders\">\r\n                    {\r\n                        this.state.keyword !== '' && this.state.filteredOrders.length === 0 ? \r\n                            <div className = \"orders__noResults\"> Sorry, no results found!  </div>\r\n                        :\r\n                        ordersToLoop.map(order=>(\r\n                            <UserOrder\r\n                               key = {order._id}\r\n                               orderId = {order._id}\r\n                               orderDate = {order.orderDate}\r\n                               products = {order.products}\r\n                               orderedBy = {order.user.name}\r\n                               totalPrice = {order.totalPrice}\r\n                               totalQuantity = {order.totalQuantity}\r\n                            />\r\n                        ))\r\n                    }\r\n                    </div>\r\n                </div>\r\n               \r\n            );\r\n        }\r\n       \r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    order: state.order\r\n})\r\nexport default connect(mapStateToProps , { getOrders })(UserOrders);"]},"metadata":{},"sourceType":"module"}