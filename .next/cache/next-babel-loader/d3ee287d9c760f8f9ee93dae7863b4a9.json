{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\products\\\\ProductDetail.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getProduct, addProductToCart } from '../../actions/productActions';\nimport { getUserCart } from '../../actions/cartActions';\nimport { withRouter } from 'react-router-dom';\nimport { submitOrder } from '../../actions/orderActions';\nimport Modal from 'react-modal';\nimport LightboxExample from '../utils/LightBoxExample';\nimport ProductModal from './ProductModal';\nimport isEmpty from '../../validation/is-empty';\nimport LoadingSpinner from '../utils/LoadingSpinner';\nvar customStyles = {\n  overlay: {\n    backgroundColor: 'rgba(30, 34, 36, 0.88)',\n    zIndex: '999'\n  },\n  content: {\n    position: 'fixed',\n    top: '40%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    width: '80%',\n    zIndex: '1000',\n    overFlow: 'scroll'\n  }\n};\n\nvar ProductDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductDetail, _Component);\n\n  function ProductDetail() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductDetail);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductDetail)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      modalIsOpen: false,\n      showOptions: false,\n      lightBoxIsOpen: false,\n      photoIndex: 0,\n      images: ['https://res.cloudinary.com/dcb389szc/image/upload/v1552347370/cravejs/logo.png', 'https://res.cloudinary.com/dcb389szc/image/upload/v1552347573/cravejs/paypal.png']\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openModal\", function () {\n      _this.setState({\n        modalIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"afterOpenModal\", function () {// references are now sync'd and can be accessed.\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeModal\", function () {\n      _this.setState({\n        modalIsOpen: false,\n        showOptions: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewCartHandler\", function () {\n      _this.props.history.push('/cart');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onViewImagesHandler\", function () {\n      _this.setState({\n        lightBoxIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addToCartHandler\", function (id) {\n      _this.props.addProductToCart(id);\n\n      _this.setState({\n        modalIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeRequestHandler\", function () {\n      _this.setState({\n        lightBoxIsOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMovePrevRequest\", function () {\n      _this.setState({\n        photoIndex: (_this.state.photoIndex + _this.state.images.length - 1) % _this.state.images.length\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMoveNextRequest\", function () {\n      _this.setState({\n        photoIndex: (_this.state.photoIndex + 1) % _this.state.images.length\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ProductDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Modal.setAppElement('body');\n      var id = this.props.match.params.id;\n      this.props.getUserCart();\n\n      if (id) {\n        this.props.getProduct(id);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this$props$products = this.props.products,\n          product = _this$props$products.product,\n          loading = _this$props$products.loading; // product object.\n      // update the images if we are done loading and image has not yet been pushed to the state image array.\n\n      if (!loading && !isEmpty(product) && this.state.images.length <= 2) {\n        var images = _toConsumableArray(this.state.images);\n\n        images.unshift(product.imageUrl);\n        this.setState({\n          images: images\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$products2 = this.props.products,\n          product = _this$props$products2.product,\n          loading = _this$props$products2.loading; // product object.\n\n      console.log(this.props.cart);\n\n      if (loading || isEmpty(product)) {\n        return React.createElement(\"div\", {\n          className: \"ProductDetail__loading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"Loading Product\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"Try reloading page if loading persists...\"), React.createElement(LoadingSpinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"ProductDetail\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, this.state.modalIsOpen ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(Modal, {\n          isOpen: this.state.modalIsOpen,\n          onRequestClose: this.closeModal,\n          style: customStyles,\n          contentLabel: \"AddToCartModal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(ProductModal, {\n          product: product,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }))) : null, React.createElement(\"div\", {\n          className: \"ProductDetail__feature\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ProductDetail__name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, \"  \", product.name, \" \"), React.createElement(\"div\", {\n          className: \"ProductDetail__description\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, \"  \", product.description, \" \"), React.createElement(\"div\", {\n          className: \"ProductDetail__price\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"  \", product.price ? \"Sale Price: $\".concat(product.price) : null, \" \")), React.createElement(\"figure\", {\n          className: \"ProductDetail__figure\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          onClick: this.onViewImagesHandler,\n          className: \"ProductDetail__image\",\n          src: product.imageUrl,\n          alt: product.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }), React.createElement(LightboxExample, {\n          className: \"ProductDetail__lightbox\",\n          isOpen: this.state.lightBoxIsOpen,\n          closeRequest: this.closeRequestHandler,\n          photoIndex: this.state.photoIndex,\n          lightBoxName: \"Enlarge Image\",\n          onViewImages: this.onViewImagesHandler,\n          images: this.state.images,\n          onMoveNextRequest: this.onMoveNextRequest,\n          onMovePrevRequest: this.onMovePrevRequest,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"ProductDetail__details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ProductDetail__longDescription\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ProductDetail__longDescription-1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \"Course Description: (This Course is A DEMO)\"), React.createElement(\"div\", {\n          className: \"ProductDetail__longDescription-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, product.longDescription))), React.createElement(\"div\", {\n          className: \"ProductDetail__cta\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.addToCartHandler.bind(this, product._id),\n          className: \"ProductDetail__cta-addToCart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"Add To Cart\"), React.createElement(\"button\", {\n          onClick: this.viewCartHandler,\n          className: \"ProductDetail__cta-addToCart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, \"View Cart\"), React.createElement(\"div\", {\n          className: \"ProductDetail__cta-features\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, \"Unlimited lifetime access\"), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, \"Certificate of completion\"), React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, \"90 Day risk free purchase\")))));\n      }\n    }\n  }]);\n\n  return ProductDetail;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    products: state.products,\n    cart: state.cart\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getProduct: getProduct,\n  addProductToCart: addProductToCart,\n  submitOrder: submitOrder,\n  getUserCart: getUserCart\n})(withRouter(ProductDetail));","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\products\\ProductDetail.js"],"names":["React","Component","connect","getProduct","addProductToCart","getUserCart","withRouter","submitOrder","Modal","LightboxExample","ProductModal","isEmpty","LoadingSpinner","customStyles","overlay","backgroundColor","zIndex","content","position","top","left","right","bottom","marginRight","transform","width","overFlow","ProductDetail","modalIsOpen","showOptions","lightBoxIsOpen","photoIndex","images","setState","props","history","push","id","state","length","setAppElement","match","params","prevProps","prevState","products","product","loading","unshift","imageUrl","console","log","cart","closeModal","name","description","price","onViewImagesHandler","closeRequestHandler","onMoveNextRequest","onMovePrevRequest","longDescription","addToCartHandler","bind","_id","viewCartHandler","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getProduct, addProductToCart } from '../../actions/productActions';\r\nimport { getUserCart } from '../../actions/cartActions';\r\nimport { withRouter } from 'react-router-dom'; \r\nimport { submitOrder } from '../../actions/orderActions';\r\n\r\nimport Modal from 'react-modal';\r\nimport LightboxExample from '../utils/LightBoxExample';\r\nimport ProductModal from './ProductModal';\r\nimport isEmpty from '../../validation/is-empty';\r\nimport LoadingSpinner from '../utils/LoadingSpinner';\r\n\r\n\r\nconst customStyles = {\r\n    overlay:{\r\n        backgroundColor:'rgba(30, 34, 36, 0.88)',\r\n        zIndex                :'999'\r\n    },\r\n    content : {\r\n      position              :'fixed',\r\n      top                   : '40%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-50%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      backgroundColor       : 'rgba(255, 255, 255, 0.95)',\r\n      width                 :'80%',\r\n      zIndex                :'1000',\r\n      overFlow              : 'scroll'\r\n    }\r\n  };\r\n\r\n\r\n\r\nclass ProductDetail extends Component {\r\n\r\n    state = {\r\n        modalIsOpen:false,\r\n        showOptions:false,\r\n        lightBoxIsOpen:false,\r\n        photoIndex:0,\r\n        images: [\r\n            'https://res.cloudinary.com/dcb389szc/image/upload/v1552347370/cravejs/logo.png',\r\n            'https://res.cloudinary.com/dcb389szc/image/upload/v1552347573/cravejs/paypal.png',\r\n          ]\r\n    }\r\n    componentDidMount() {\r\n        Modal.setAppElement('body');\r\n        const { id } = this.props.match.params;\r\n        this.props.getUserCart();\r\n        if(id){\r\n             this.props.getProduct(id);\r\n        }\r\n        \r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { product, loading } = this.props.products; // product object.\r\n        // update the images if we are done loading and image has not yet been pushed to the state image array.\r\n        if(!loading && !isEmpty(product) && this.state.images.length <=2){\r\n        \r\n            const images = [...this.state.images];\r\n            images.unshift(product.imageUrl);\r\n            this.setState({images})\r\n        }\r\n        \r\n    }\r\n    \r\n    \r\n\r\n    openModal = () => {\r\n        this.setState({\r\n            modalIsOpen:true\r\n        })\r\n    }\r\n\r\n    afterOpenModal = () => {\r\n        // references are now sync'd and can be accessed.\r\n        \r\n      }\r\n\r\n    closeModal = () => {\r\n        this.setState({\r\n            modalIsOpen: false,\r\n            showOptions:false\r\n        });\r\n    }\r\n    viewCartHandler = () => {\r\n        this.props.history.push('/cart');\r\n    }\r\n\r\n    onViewImagesHandler = () => {\r\n       \r\n        this.setState({\r\n            lightBoxIsOpen:true\r\n        })\r\n    }\r\n    addToCartHandler = (id) => {\r\n        this.props.addProductToCart(id);\r\n        this.setState({modalIsOpen:true})\r\n        \r\n    }\r\n    closeRequestHandler = () => {\r\n        this.setState({ lightBoxIsOpen:false })\r\n    }\r\n    onMovePrevRequest= () => {\r\n        this.setState({ photoIndex: (this.state.photoIndex + this.state.images.length - 1) % this.state.images.length })\r\n    } \r\n\r\n    onMoveNextRequest = () => {\r\n        this.setState({ photoIndex: (this.state.photoIndex + 1) % this.state.images.length })\r\n    } \r\n\r\n    render() {\r\n        \r\n        const { product, loading } = this.props.products; // product object.\r\n        console.log(this.props.cart);\r\n        if( loading || isEmpty(product) ) {\r\n            return (\r\n                <div className = \"ProductDetail__loading\">\r\n                    <div>\r\n                        Loading Product\r\n                    </div>\r\n                    <div>Try reloading page if loading persists...</div>\r\n                    <LoadingSpinner/>\r\n                 </div>\r\n            )\r\n        }\r\n\r\n        else {\r\n            return (\r\n\r\n                <div className = \"ProductDetail\">\r\n    \r\n                                {\r\n                                    this.state.modalIsOpen ? \r\n                                    <div>\r\n                                           \r\n                                            <Modal\r\n                                            isOpen={this.state.modalIsOpen}\r\n                                            onRequestClose={this.closeModal}\r\n                                            style={customStyles}\r\n                                            contentLabel=\"AddToCartModal\"\r\n                                            >\r\n                                                <ProductModal product = {product}/>\r\n                                            </Modal>\r\n                                    </div>\r\n                                    \r\n                                    : null\r\n                                }\r\n     \r\n    \r\n                    <div className=\"ProductDetail__feature\">\r\n                        <div className=\"ProductDetail__name\">  { product.name } </div>\r\n                        <div className=\"ProductDetail__description\">  { product.description } </div>\r\n                        <div className=\"ProductDetail__price\">  { product.price ? `Sale Price: $${product.price}` : null } </div>\r\n                    </div>\r\n    \r\n                    <figure className=\"ProductDetail__figure\"> \r\n                            <img onClick = {this.onViewImagesHandler} className = \"ProductDetail__image\" src = { product.imageUrl } alt = { product.name } /> \r\n                \r\n                                <LightboxExample\r\n                                    className = \"ProductDetail__lightbox\"\r\n                                    isOpen = { this.state.lightBoxIsOpen }\r\n                                    closeRequest = {this.closeRequestHandler}\r\n                                    photoIndex = { this.state.photoIndex }\r\n                                    lightBoxName = \"Enlarge Image\"\r\n                                    onViewImages = { this.onViewImagesHandler } \r\n                                    images = {this.state.images}\r\n                                    onMoveNextRequest = { this.onMoveNextRequest }\r\n                                    onMovePrevRequest = { this.onMovePrevRequest }\r\n                                />\r\n                            \r\n                    </figure>\r\n                    \r\n    \r\n                    <div className=\"ProductDetail__details\">\r\n                         <div className=\"ProductDetail__longDescription\"> \r\n                            \r\n                            <div className=\"ProductDetail__longDescription-1\">\r\n                                 Course Description: (This Course is A DEMO)\r\n                            </div>\r\n                            <div className=\"ProductDetail__longDescription-2\">\r\n                                  { product.longDescription } \r\n                            </div>\r\n            \r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"ProductDetail__cta\">\r\n                                <button onClick = {this.addToCartHandler.bind(this,product._id)} className=\"ProductDetail__cta-addToCart\">\r\n                                        Add To Cart\r\n                                </button>\r\n                                {\r\n                                    \r\n                                }\r\n    \r\n                                <button onClick = {this.viewCartHandler} className=\"ProductDetail__cta-addToCart\">\r\n                                        View Cart\r\n                                </button>\r\n    \r\n                                \r\n                                <div className=\"ProductDetail__cta-features\">\r\n                                        <ul>\r\n                                            <li>\r\n                                                Unlimited lifetime access\r\n                                            </li>\r\n                                            <li>\r\n                                                Certificate of completion\r\n                                            </li>\r\n                                            <li>\r\n                                                90 Day risk free purchase\r\n                                            </li>\r\n                                        </ul>   \r\n                                </div>\r\n                    </div>\r\n    \r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    products: state.products,\r\n    cart:state.cart\r\n})\r\nexport default connect(mapStateToProps , { getProduct, addProductToCart, submitOrder, getUserCart })(withRouter(ProductDetail) );"]},"metadata":{},"sourceType":"module"}