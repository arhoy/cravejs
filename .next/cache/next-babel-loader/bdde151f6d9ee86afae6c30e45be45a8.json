{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\profiles\\\\ProfileItem.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classnames from 'classnames';\nimport { addCommentLike, removeCommentLike, deleteComment } from '../../actions/profileActions';\nimport TimeAgo from 'react-timeago';\nimport ProfileEditForm from './ProfileEditForm';\nimport ReplyForm from './replies/ReplyForm';\nimport Replies from './replies/Replies';\nimport Modal from 'react-modal';\nvar customStyles = {\n  overlay: {\n    backgroundColor: 'rgba(0,121,191,0.85)',\n    zIndex: '999'\n  },\n  content: {\n    position: 'fixed',\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    backgroundColor: 'rgba(255, 255, 255, 0.95)',\n    width: '80%',\n    zIndex: '1000'\n  }\n};\n\nvar ProfileItem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProfileItem, _Component);\n\n  function ProfileItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProfileItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProfileItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showOptions: false,\n      showReplyOption: false,\n      modalIsOpen: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openModal\", function () {\n      _this.setState({\n        modalIsOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"afterOpenModal\", function () {// references are now sync'd and can be accessed.\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeModal\", function (e) {\n      _this.setState({\n        modalIsOpen: false,\n        showOptions: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onLikeClick\", function (id) {\n      var profile = _this.props.profile.profile;\n\n      if (_this.findUserLike(_this.props.comment.likes)) {\n        _this.props.removeCommentLike(profile.handle, id);\n      } else {\n        _this.props.addCommentLike(profile.handle, id);\n      }\n\n      _this.findUserLike(_this.props.comment.likes);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onToolBar\", function (id) {\n      _this.setState({\n        showOptions: !_this.state.showOptions\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReplyClick\", function (id) {\n      _this.setState({\n        showReplyOption: !_this.state.showReplyOption\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deletePostHandler\", function (id) {\n      var profile = _this.props.profile.profile;\n\n      _this.props.deleteComment(profile.handle, id);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"findUserLike\", function (likes) {\n      var auth = _this.props.auth;\n\n      if (likes.filter(function (like) {\n        return like.user === auth.user.id;\n      }).length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(ProfileItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Modal.setAppElement('body');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var comment = this.props.comment;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"PostItem\",\n        style: {\n          backgroundColor: this.props.backgroundColor\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, this.state.showOptions ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('PostOptions', {\n          'PostOptions__disappear': this.state.modalIsOpen\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostOptions__editPost\",\n        onClick: this.openModal.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Edit comment\"), React.createElement(\"button\", {\n        className: \"PostOptions__deletePost\",\n        onClick: this.deletePostHandler.bind(this, comment._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Delete comment\")), React.createElement(Modal, {\n        isOpen: this.state.modalIsOpen,\n        onRequestClose: this.closeModal,\n        style: customStyles,\n        contentLabel: \"PostEditFormModal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(ProfileEditForm, {\n        commentId: comment._id,\n        handler: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }))) : null, React.createElement(\"div\", {\n        className: \"PostItem__content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"PostItem__name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, comment.name), \" \", comment.text, React.createElement(\"div\", {\n        className: \"PostItem__timeago\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(TimeAgo, {\n        live: false,\n        date: comment.date,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"PostItem__toolbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostItem__ellipses\",\n        onClick: this.onToolBar.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, this.state.showOptions ? React.createElement(FontAwesomeIcon, {\n        icon: \"times-circle\",\n        style: {\n          color: \"\".concat(this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'),\n          cursor: 'pointer'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }) : React.createElement(FontAwesomeIcon, {\n        icon: \"ellipsis-h\",\n        style: {\n          color: \"\".concat(this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'),\n          cursor: 'pointer'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"PostItem__collection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"PostItem__likes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostItem__like\",\n        onClick: this.onLikeClick.bind(this, comment._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: \"thumbs-up\",\n        style: {\n          color: \"\".concat(this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'),\n          cursor: 'pointer'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }))), React.createElement(\"span\", {\n        className: \"PostItem__replies\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostItem__reply\",\n        onClick: this.onReplyClick.bind(this, comment._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Reply\")), comment.likes.length > 0 ? React.createElement(\"span\", {\n        className: \"PostItem__countLikesContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostItem__countLikes\",\n        onClick: this.onReplyClick.bind(this, comment._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, comment.likes.length === 1 ? \"\".concat(comment.likes.length, \" like\") : \"\".concat(comment.likes.length, \" likes\"))) : null, comment.replies.length > 0 ? React.createElement(\"span\", {\n        className: \"PostItem__showHideRepliesContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"PostItem__showHideReplies\",\n        onClick: this.onReplyClick.bind(this, comment._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, comment.replies.length, \" Replies\")) : null))), this.state.showReplyOption ? React.createElement(ReplyForm, {\n        postItem: comment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }) : null, comment.replies.length > 0 ? React.createElement(\"div\", {\n        className: \"replies\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"  \", React.createElement(Replies, {\n        backgroundColor: this.props.backgroundColor,\n        postItem: comment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), \"  \") : null);\n    }\n  }]);\n\n  return ProfileItem;\n}(Component);\n\nProfileItem.defaultProps = {\n  showActions: true\n};\nProfileItem.propTypes = {\n  addCommentLike: PropTypes.func.isRequired,\n  removeCommentLike: PropTypes.func.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  comment: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    profile: state.profile\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addCommentLike: addCommentLike,\n  removeCommentLike: removeCommentLike,\n  deleteComment: deleteComment\n})(ProfileItem);","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\profiles\\ProfileItem.js"],"names":["React","Component","PropTypes","connect","FontAwesomeIcon","classnames","addCommentLike","removeCommentLike","deleteComment","TimeAgo","ProfileEditForm","ReplyForm","Replies","Modal","customStyles","overlay","backgroundColor","zIndex","content","position","top","left","right","bottom","marginRight","transform","width","ProfileItem","showOptions","showReplyOption","modalIsOpen","setState","e","id","profile","props","findUserLike","comment","likes","handle","state","auth","filter","like","user","length","setAppElement","openModal","bind","deletePostHandler","_id","closeModal","name","text","date","onToolBar","color","cursor","onLikeClick","onReplyClick","replies","defaultProps","showActions","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport classnames from 'classnames';\r\nimport { addCommentLike, removeCommentLike, deleteComment } from '../../actions/profileActions';\r\nimport TimeAgo from 'react-timeago'\r\n\r\n\r\nimport ProfileEditForm from './ProfileEditForm';\r\nimport ReplyForm from './replies/ReplyForm';\r\nimport Replies from './replies/Replies';\r\nimport Modal from 'react-modal';\r\n\r\n\r\n \r\nconst customStyles = {\r\n    overlay:{\r\n        backgroundColor:'rgba(0,121,191,0.85)',\r\n        zIndex                :'999'\r\n    },\r\n    content : {\r\n      position              :'fixed',\r\n      top                   : '50%',\r\n      left                  : '50%',\r\n      right                 : 'auto',\r\n      bottom                : 'auto',\r\n      marginRight           : '-50%',\r\n      transform             : 'translate(-50%, -50%)',\r\n      backgroundColor       : 'rgba(255, 255, 255, 0.95)',\r\n      width                 :'80%',\r\n      zIndex                :'1000'\r\n    }\r\n  };\r\n\r\nclass ProfileItem extends Component {\r\n\r\n    state = {\r\n        showOptions:false,\r\n        showReplyOption:false,\r\n        modalIsOpen:false,\r\n    }\r\n\r\n  \r\n\r\n    componentDidMount() {\r\n        Modal.setAppElement('body');\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({\r\n            modalIsOpen:true\r\n        })\r\n    }\r\n\r\n    afterOpenModal = () => {\r\n        // references are now sync'd and can be accessed.\r\n        \r\n      }\r\n\r\n    closeModal = (e) => {\r\n        this.setState({\r\n            modalIsOpen: false,\r\n            showOptions:false\r\n        });\r\n      }\r\n\r\n    onLikeClick = (id) => {\r\n        const { profile } = this.props.profile;\r\n\r\n        if(this.findUserLike(this.props.comment.likes)){\r\n            this.props.removeCommentLike(profile.handle,id);\r\n        }\r\n        else {\r\n            this.props.addCommentLike(profile.handle,id);\r\n        }\r\n       \r\n        this.findUserLike(this.props.comment.likes);\r\n    }\r\n    onToolBar = (id) => {\r\n        this.setState({showOptions:!this.state.showOptions})\r\n    }\r\n    onReplyClick = (id) => {\r\n        this.setState({showReplyOption:!this.state.showReplyOption})\r\n    }\r\n\r\n    deletePostHandler = (id) => {\r\n        const { profile } = this.props.profile;\r\n        this.props.deleteComment(profile.handle,id);\r\n      \r\n   }\r\n\r\n\r\n\r\n    findUserLike = (likes) => { \r\n      const { auth } = this.props;\r\n      if ( likes.filter( like => like.user === auth.user.id).length > 0) {\r\n        return true;\r\n      }\r\n      else {\r\n          return false\r\n      }\r\n    }\r\n\r\n    render() { \r\n        const { comment } = this.props;\r\n   \r\n        return (\r\n            <React.Fragment>\r\n\r\n           \r\n            <div className = \"PostItem\" style = {{backgroundColor:this.props.backgroundColor}}>\r\n          \r\n                       {\r\n                           this.state.showOptions ?\r\n                        \r\n                                <div>\r\n                                        <div className= {classnames('PostOptions',{'PostOptions__disappear':this.state.modalIsOpen})} >\r\n                                            <button className = \"PostOptions__editPost\"  onClick={this.openModal.bind(this)}>Edit comment</button>\r\n                                            <button className = \"PostOptions__deletePost\" onClick={this.deletePostHandler.bind(this,comment._id)}>Delete comment</button>\r\n                                        </div>\r\n                                    \r\n                                        <Modal\r\n                                        isOpen={this.state.modalIsOpen}\r\n                                        onRequestClose={this.closeModal}\r\n                                        style={customStyles}\r\n                                        contentLabel=\"PostEditFormModal\"\r\n                                        >\r\n                                            <ProfileEditForm \r\n                                                commentId = {comment._id}\r\n                                                handler = {this.closeModal}    \r\n                                            />\r\n                                        </Modal>\r\n                                </div>\r\n                     \r\n            \r\n                           \r\n                            \r\n                             : null   \r\n                       }  \r\n         \r\n                    \r\n                    <div className = \"PostItem__content\">\r\n\r\n                        <span className = \"PostItem__name\">{comment.name}</span> {comment.text}\r\n                        <div className = \"PostItem__timeago\" >\r\n                             <TimeAgo live = {false} date= { comment.date }  />\r\n                        </div>\r\n                       \r\n\r\n                        \r\n                        <div className=\"PostItem__toolbar\" >\r\n\r\n                                <button className = \"PostItem__ellipses\" onClick = { this.onToolBar.bind(this) } >\r\n                                            {\r\n                                                this.state.showOptions ? \r\n                                                <FontAwesomeIcon\r\n                                                    icon=\"times-circle\"\r\n                                                    style = {{color:`${this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'}`, cursor:'pointer'}}\r\n                                                 />\r\n                                             \r\n                                                :\r\n                                                <FontAwesomeIcon\r\n                                                    icon=\"ellipsis-h\"\r\n                                                    style = {{color:`${this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'}`, cursor:'pointer'}}\r\n                                                />\r\n                                               \r\n                                            }\r\n                                            \r\n                                </button>  \r\n                        </div>\r\n                                \r\n                       \r\n\r\n                          <div className = \"PostItem__collection\">  \r\n                                <span className = \"PostItem__likes\">\r\n                                    <button className = \"PostItem__like\" onClick = {this.onLikeClick.bind(this,comment._id)} >\r\n                                        <FontAwesomeIcon\r\n                                            icon=\"thumbs-up\"\r\n                                            style = {{color:`${this.findUserLike(comment.likes) ? 'rgb(0, 121, 191)' : 'white'}`, cursor:'pointer'}}\r\n                                        />\r\n                                    </button>\r\n                                </span> \r\n                                <span className = \"PostItem__replies\">\r\n                                    <button className = \"PostItem__reply\" onClick = {this.onReplyClick.bind(this,comment._id)} >\r\n                                        Reply\r\n                                    </button>\r\n                                </span> \r\n                                {\r\n                                    comment.likes.length > 0 ? \r\n                                    <span className = \"PostItem__countLikesContainer\">\r\n                                        <button className = \"PostItem__countLikes\" onClick = {this.onReplyClick.bind(this,comment._id)} >\r\n                                        {comment.likes.length === 1 ? `${comment.likes.length} like` : `${comment.likes.length} likes`}\r\n                                        </button>\r\n                                     </span> \r\n                                    :null\r\n                                }\r\n                               {\r\n                                comment.replies.length > 0 ? \r\n                                   <span className = \"PostItem__showHideRepliesContainer\">\r\n                                        <button className = \"PostItem__showHideReplies\" onClick = {this.onReplyClick.bind(this,comment._id)} >\r\n                                        {comment.replies.length} Replies\r\n                                        </button>\r\n                                    </span> \r\n                                   :null\r\n                               }\r\n                             \r\n                          </div>\r\n                    </div>    \r\n            </div>\r\n\r\n            {\r\n                this.state.showReplyOption ? <ReplyForm postItem = {comment}/> : null\r\n            }\r\n\r\n            {\r\n                comment.replies.length > 0 ? <div className = \"replies\">  <Replies backgroundColor = {this.props.backgroundColor} postItem = {comment} />  </div>  : null\r\n            }\r\n        \r\n\r\n            </React.Fragment>\r\n\r\n            \r\n        );\r\n    }\r\n}\r\n\r\nProfileItem.defaultProps = {\r\n  showActions: true\r\n};\r\n\r\nProfileItem.propTypes = {\r\n  addCommentLike: PropTypes.func.isRequired,\r\n  removeCommentLike: PropTypes.func.isRequired,\r\n  deleteComment: PropTypes.func.isRequired,\r\n  comment: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired\r\n};\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    auth:state.auth,\r\n    profile:state.profile\r\n});\r\n\r\nexport default connect(mapStateToProps, { addCommentLike, removeCommentLike, deleteComment })(ProfileItem);"]},"metadata":{},"sourceType":"module"}