{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\auth\\\\Login.js\";\nimport React, { Component } from 'react';\nimport TextFieldGroup from '../common/TextFieldGroup';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { loginUser, clearErrors } from '../../actions/authActions';\nimport { Link } from 'react-router-dom';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: '',\n      password: '',\n      errors: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeHandler\", function (e) {\n      e.preventDefault();\n\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.auth.isAuthenticated) {\n        this.props.history.push('/dashboard');\n      }\n\n      this.props.clearErrors();\n    }\n  }, {\n    key: \"onSubmitHandler\",\n    value: function onSubmitHandler(e) {\n      e.preventDefault();\n      var userData = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      this.props.loginUser(userData, this.props.history);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var errors = this.state.errors;\n      return React.createElement(\"section\", {\n        className: \"section-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login__form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          return _this2.onSubmitHandler(e);\n        },\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"u-margin-bottom-medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"heading-secondary\",\n        style: {\n          color: '#333',\n          fontWeight: '200'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Login to your account\")), React.createElement(TextFieldGroup, {\n        placeholder: \"Email\",\n        name: \"email\",\n        type: \"email\",\n        value: this.state.email,\n        onChange: this.onChangeHandler.bind(this),\n        error: errors.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(TextFieldGroup, {\n        placeholder: \"Password\",\n        name: \"password\",\n        type: \"password\",\n        value: this.state.password,\n        onChange: this.onChangeHandler.bind(this),\n        error: errors.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form__group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn--primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Sign In\"))), React.createElement(\"p\", {\n        className: \"form__info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \" Don't have an account yet? Create one \", React.createElement(Link, {\n        className: \"form__link\",\n        to: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \" Here \"))))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.errors !== state.errors) {\n        return {\n          errors: props.errors\n        };\n      }\n\n      if (props.auth.isAuthenticated) {\n        // props.history.push('/dashboard');\n        if (props.location.state && props.location.state.from) {\n          var pathTo = props.location.state.from.pathname || '/dashboard';\n          props.history.push(pathTo);\n        } else {\n          props.history.push('/dashboard');\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.propTypes = {\n  loginUser: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    errors: state.errors\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loginUser: loginUser,\n  clearErrors: clearErrors\n})(withRouter(Login));","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\auth\\Login.js"],"names":["React","Component","TextFieldGroup","PropTypes","withRouter","connect","loginUser","clearErrors","Link","Login","email","password","errors","e","preventDefault","setState","target","name","value","props","auth","isAuthenticated","history","push","userData","state","onSubmitHandler","color","fontWeight","onChangeHandler","bind","location","from","pathTo","pathname","propTypes","func","isRequired","object","mapStateToProps"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,2BAAvC;AACA,SAASC,IAAT,QAAqB,kBAArB;;IAEMC,K;;;;;;;;;;;;;;;;;;4DAEM;AACFC,MAAAA,KAAK,EAAE,EADL;AAEFC,MAAAA,QAAQ,EAAE,EAFR;AAGFC,MAAAA,MAAM,EAAE;AAHN,K;;sEA+BU,UAACC,CAAD,EAAO;AACrBA,MAAAA,CAAC,CAACC,cAAF;;AACA,YAAKC,QAAL,qBAAiBF,CAAC,CAACG,MAAF,CAASC,IAA1B,EAAiCJ,CAAC,CAACG,MAAF,CAASE,KAA1C;AACH,K;;;;;;;wCA3BmB;AAChB,UAAG,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,eAAnB,EAAmC;AAC/B,aAAKF,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACH;;AACD,WAAKJ,KAAL,CAAWZ,WAAX;AACH;;;oCAwBeM,C,EAAG;AACfA,MAAAA,CAAC,CAACC,cAAF;AACA,UAAMU,QAAQ,GAAG;AACfd,QAAAA,KAAK,EAAE,KAAKe,KAAL,CAAWf,KADH;AAEfC,QAAAA,QAAQ,EAAE,KAAKc,KAAL,CAAWd;AAFN,OAAjB;AAKC,WAAKQ,KAAL,CAAWb,SAAX,CAAqBkB,QAArB,EAA+B,KAAKL,KAAL,CAAWG,OAA1C;AAEF;;;6BAEM;AAAA;;AAAA,UAEGV,MAFH,GAEc,KAAKa,KAFnB,CAEGb,MAFH;AAGL,aACI;AAAS,QAAA,SAAS,EAAC,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,QAAA,QAAQ,EAAK,kBAACC,CAAD;AAAA,iBAAO,MAAI,CAACa,eAAL,CAAqBb,CAArB,CAAP;AAAA,SAAnB;AAAoD,QAAA,SAAS,EAAC,MAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAG,mBAAhB;AAAoC,QAAA,KAAK,EAAI;AAACc,UAAAA,KAAK,EAAC,MAAP;AAAcC,UAAAA,UAAU,EAAE;AAA1B,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,CADA,EAOA,oBAAC,cAAD;AACI,QAAA,WAAW,EAAC,OADhB;AAEI,QAAA,IAAI,EAAC,OAFT;AAGI,QAAA,IAAI,EAAG,OAHX;AAII,QAAA,KAAK,EAAE,KAAKH,KAAL,CAAWf,KAJtB;AAKI,QAAA,QAAQ,EAAI,KAAKmB,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CALhB;AAMI,QAAA,KAAK,EAAElB,MAAM,CAACF,KANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPA,EAgBA,oBAAC,cAAD;AACI,QAAA,WAAW,EAAC,UADhB;AAEI,QAAA,IAAI,EAAC,UAFT;AAGI,QAAA,IAAI,EAAG,UAHX;AAII,QAAA,KAAK,EAAE,KAAKe,KAAL,CAAWd,QAJtB;AAKI,QAAA,QAAQ,EAAI,KAAKkB,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CALhB;AAMI,QAAA,KAAK,EAAElB,MAAM,CAACD,QANlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBA,EA0BA;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,IAAI,EAAG,QAAf;AAAwB,QAAA,SAAS,EAAC,kBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CA1BA,CADJ,EA+BA;AAAG,QAAA,SAAS,EAAG,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAAmE,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAG,YAAlB;AAA+B,QAAA,EAAE,EAAG,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAnE,CA/BA,CADJ,CADJ,CADJ,CADJ;AAyCH;;;6CA5EgCQ,K,EAAOM,K,EAAO;AAC3C,UAAGN,KAAK,CAACP,MAAN,KAAiBa,KAAK,CAACb,MAA1B,EAAkC;AAClC,eAAO;AAACA,UAAAA,MAAM,EAAEO,KAAK,CAACP;AAAf,SAAP;AACC;;AACD,UAAIO,KAAK,CAACC,IAAN,CAAWC,eAAf,EAAgC;AAC5B;AACA,YAAGF,KAAK,CAACY,QAAN,CAAeN,KAAf,IAAwBN,KAAK,CAACY,QAAN,CAAeN,KAAf,CAAqBO,IAAhD,EAAsD;AAClD,cAAMC,MAAM,GAAGd,KAAK,CAACY,QAAN,CAAeN,KAAf,CAAqBO,IAArB,CAA0BE,QAA1B,IAAsC,YAArD;AACAf,UAAAA,KAAK,CAACG,OAAN,CAAcC,IAAd,CAAmBU,MAAnB;AACH,SAHD,MAGO;AACHd,UAAAA,KAAK,CAACG,OAAN,CAAcC,IAAd,CAAmB,YAAnB;AACH;AACF;;AACH,aAAO,IAAP;AACH;;;;EA/BetB,S;;AA+FpBQ,KAAK,CAAC0B,SAAN,GAAkB;AACd7B,EAAAA,SAAS,EAAEH,SAAS,CAACiC,IAAV,CAAeC,UADZ;AAEd9B,EAAAA,WAAW,EAAEJ,SAAS,CAACiC,IAAV,CAAeC,UAFd;AAGdjB,EAAAA,IAAI,EAAEjB,SAAS,CAACmC,MAAV,CAAiBD,UAHT;AAIdzB,EAAAA,MAAM,EAAET,SAAS,CAACmC,MAAV,CAAiBD;AAJX,CAAlB;;AAOA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAAd,KAAK;AAAA,SAAK;AAC9BL,IAAAA,IAAI,EAAEK,KAAK,CAACL,IADkB;AAE9BR,IAAAA,MAAM,EAAEa,KAAK,CAACb;AAFgB,GAAL;AAAA,CAA7B;;AAKA,eAAeP,OAAO,CAACkC,eAAD,EAAkB;AAAEjC,EAAAA,SAAS,EAATA,SAAF;AAAaC,EAAAA,WAAW,EAAXA;AAAb,CAAlB,CAAP,CAAqDH,UAAU,CAACK,KAAD,CAA/D,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport TextFieldGroup from '../common/TextFieldGroup';\r\nimport PropTypes from 'prop-types';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { loginUser ,clearErrors } from '../../actions/authActions';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n \r\n    state = {\r\n          email: '',\r\n          password: '',\r\n          errors: {}\r\n    \r\n      }\r\n\r\n    componentDidMount() {\r\n        if(this.props.auth.isAuthenticated){\r\n            this.props.history.push('/dashboard');\r\n        }\r\n        this.props.clearErrors();\r\n    }\r\n    \r\n\r\n    static getDerivedStateFromProps (props, state) {\r\n        if(props.errors !== state.errors) {\r\n        return {errors: props.errors}\r\n        }\r\n        if (props.auth.isAuthenticated) {\r\n            // props.history.push('/dashboard');\r\n            if(props.location.state && props.location.state.from) {\r\n                const pathTo = props.location.state.from.pathname || '/dashboard';\r\n                props.history.push(pathTo);\r\n            } else {\r\n                props.history.push('/dashboard');\r\n            }\r\n          }\r\n        return null;\r\n    }\r\n\r\n    onChangeHandler = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n\r\n    onSubmitHandler(e) {\r\n        e.preventDefault();\r\n        const userData = {\r\n          email: this.state.email,\r\n          password: this.state.password\r\n        };\r\n    \r\n         this.props.loginUser(userData, this.props.history);\r\n\r\n      }\r\n\r\n    render() {\r\n\r\n        const { errors } = this.state;\r\n        return (\r\n            <section className=\"section-login\">\r\n                <div className=\"row\">\r\n                    <div className=\"login\">\r\n                        <div className=\"login__form\">\r\n                            <form onSubmit = { (e) => this.onSubmitHandler(e) } className=\"form\">\r\n                            <div className=\"u-margin-bottom-medium\">\r\n                                <h2 className = \"heading-secondary\" style = {{color:'#333',fontWeight: '200'}} >\r\n                                    Login to your account\r\n                                </h2>\r\n                            </div>\r\n\r\n                            <TextFieldGroup\r\n                                placeholder=\"Email\"\r\n                                name=\"email\"\r\n                                type = \"email\"\r\n                                value={this.state.email}\r\n                                onChange = {this.onChangeHandler.bind(this)} \r\n                                error={errors.email}\r\n                            />\r\n\r\n                            <TextFieldGroup\r\n                                placeholder=\"Password\"\r\n                                name=\"password\"\r\n                                type = \"password\"\r\n                                value={this.state.password}\r\n                                onChange = {this.onChangeHandler.bind(this)} \r\n                                error={errors.password}\r\n                            />\r\n                            \r\n\r\n                            <div className=\"form__group\">\r\n                                <button type = \"submit\" className=\"btn btn--primary\">Sign In</button>\r\n                            </div>\r\n                        </form>\r\n                        <p className = \"form__info\"> Don't have an account yet? Create one <Link className = \"form__link\" to = \"/register\"> Here </Link></p>\r\n                      </div>\r\n                   </div>\r\n                </div>\r\n        </section>\r\n        );\r\n    }\r\n}\r\nLogin.propTypes = {\r\n    loginUser: PropTypes.func.isRequired,\r\n    clearErrors: PropTypes.func.isRequired,\r\n    auth: PropTypes.object.isRequired,\r\n    errors: PropTypes.object.isRequired\r\n  };\r\n\r\nconst mapStateToProps = state => ({\r\n    auth: state.auth,\r\n    errors: state.errors\r\n  });\r\n\r\nexport default connect(mapStateToProps, { loginUser, clearErrors })(withRouter(Login));"]},"metadata":{},"sourceType":"module"}