{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\posts\\\\PostForm.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport TextAreaFieldGroup from '../common/TextAreaFieldGroup';\nimport { addPost } from '../../actions/postActions';\nimport PropTypes from 'prop-types';\nimport isEmpty from '../../validation/is-empty';\nvar maxPostLength = 2000;\n\nvar PostForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PostForm, _Component);\n\n  function PostForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PostForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PostForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      text: '',\n      errors: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeHandler\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmitHandler\", function (e) {\n      e.preventDefault();\n      var user = _this.props.auth.user;\n      var newPost = {\n        text: _this.state.text,\n        name: user.name,\n        avatar: user.avatar // validation \n\n      };\n\n      if (newPost.text.length < maxPostLength) {\n        _this.props.addPost(newPost);\n\n        _this.setState({\n          text: ''\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(PostForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var errors = this.state.errors;\n      var isAuthenticated = this.props.auth.isAuthenticated;\n      var _this$props = this.props,\n          backgroundColor = _this$props.backgroundColor,\n          placeholder = _this$props.placeholder,\n          color = _this$props.color;\n      return React.createElement(\"div\", {\n        className: \"PostForm\",\n        style: {\n          backgroundColor: backgroundColor,\n          color: color\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"PostForm__form\",\n        onSubmit: function onSubmit(e) {\n          return _this2.onSubmitHandler(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"PostForm__textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(TextAreaFieldGroup, {\n        placeholder: isEmpty(errors.postErrors) ? placeholder : errors.postErrors.text,\n        name: \"text\",\n        value: this.state.text,\n        onChange: function onChange(e) {\n          return _this2.onChangeHandler(e);\n        } //  error={errors.text}\n        ,\n        className: \"form__textarea form__textarea-grey\",\n        rows: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"PostForm__message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.state.text.length > maxPostLength ? React.createElement(\"div\", {\n        className: \"PostForm__postLimitExceeded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, isAuthenticated ? \"Post must be under \".concat(maxPostLength, \" characters!\") : 'Must be logged in to post') : null, this.state.text.length <= maxPostLength ? React.createElement(\"div\", {\n        className: \"PostForm__postCharacterCount\",\n        style: {\n          color: color\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, isAuthenticated ? \"\".concat(maxPostLength - this.state.text.length, \" characters remaining!\") : 'Must be logged in to post') : null), React.createElement(\"button\", {\n        disabled: !isAuthenticated,\n        type: \"submit\",\n        className: \"PostForm__button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.errors !== prevState.errors) {\n        return {\n          errors: nextProps.errors\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return PostForm;\n}(Component);\n\nPostForm.propTypes = {\n  auth: PropTypes.object.isRequired,\n  //   errors: PropTypes.object.isRequired,\n  addPost: PropTypes.func.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    errors: state.errors\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addPost: addPost\n})(PostForm);","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\posts\\PostForm.js"],"names":["React","Component","connect","TextAreaFieldGroup","addPost","PropTypes","isEmpty","maxPostLength","PostForm","text","errors","e","setState","target","name","value","preventDefault","user","props","auth","newPost","state","avatar","length","isAuthenticated","backgroundColor","placeholder","color","onSubmitHandler","postErrors","onChangeHandler","nextProps","prevState","propTypes","object","isRequired","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport TextAreaFieldGroup from '../common/TextAreaFieldGroup';\r\nimport { addPost } from '../../actions/postActions';\r\nimport PropTypes from 'prop-types';\r\nimport isEmpty from '../../validation/is-empty';\r\n\r\nconst maxPostLength = 2000;\r\nclass PostForm extends Component {\r\n    state = {\r\n        text: '',\r\n       errors:{}\r\n    }\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        if(nextProps.errors !== prevState.errors) {\r\n            return {errors: nextProps.errors}\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    onChangeHandler = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n    onSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n        const { user } = this.props.auth;\r\n        const newPost = {\r\n            text: this.state.text,\r\n            name: user.name,\r\n            avatar: user.avatar\r\n        }\r\n    \r\n         // validation \r\n         if(newPost.text.length < maxPostLength ){\r\n            this.props.addPost(newPost);\r\n            this.setState({text:''});\r\n         }\r\n     \r\n    }\r\n    \r\n    \r\n    render() {\r\n       const {errors} = this.state;\r\n       const { isAuthenticated } = this.props.auth;\r\n       const { backgroundColor,placeholder, color } = this.props;\r\n        return (\r\n    \r\n            <div className = \"PostForm\" style = {{backgroundColor, color}} >\r\n               <form className = \"PostForm__form\" onSubmit={ (e)=> this.onSubmitHandler(e) }>\r\n                    <div className = \"PostForm__textarea\">\r\n                        <TextAreaFieldGroup\r\n                        placeholder= { isEmpty(errors.postErrors) ? placeholder : errors.postErrors.text}\r\n                        name=\"text\"\r\n                        value={this.state.text}\r\n                        onChange={ (e)=> this.onChangeHandler(e)}\r\n                        //  error={errors.text}\r\n                        className = \"form__textarea form__textarea-grey\"\r\n                        rows = {5}\r\n                        />\r\n                    </div>\r\n                 \r\n                    <div className = \"PostForm__message\">\r\n                            {\r\n                            this.state.text.length > maxPostLength ?\r\n                                <div className = \"PostForm__postLimitExceeded\">\r\n                                   {isAuthenticated ? `Post must be under ${maxPostLength} characters!` : 'Must be logged in to post'} \r\n                                </div> \r\n                            : null\r\n                        }\r\n\r\n                        {\r\n                                this.state.text.length <= maxPostLength ?\r\n                                <div className = \"PostForm__postCharacterCount\" style = {{color}}>\r\n                                   { isAuthenticated ? `${maxPostLength - this.state.text.length} characters remaining!` : 'Must be logged in to post'  } \r\n                                </div> \r\n                            : null\r\n                        }\r\n                    </div>\r\n                 \r\n                    <button disabled = {!isAuthenticated} type=\"submit\" className=\"PostForm__button\">\r\n                        Submit\r\n                    </button>\r\n                 \r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nPostForm.propTypes = {\r\n     auth: PropTypes.object.isRequired,\r\n //   errors: PropTypes.object.isRequired,\r\n    addPost:PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    auth:state.auth,\r\n    errors: state.errors\r\n  });\r\n\r\n\r\nexport default connect(mapStateToProps,{ addPost })(PostForm);"]},"metadata":{},"sourceType":"module"}