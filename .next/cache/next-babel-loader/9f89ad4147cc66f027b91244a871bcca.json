{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\arhoy\\\\Desktop\\\\cravejs\\\\client\\\\src\\\\components\\\\posts\\\\PostForm.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport TextAreaFieldGroup from '../common/TextAreaFieldGroup';\nimport { addPost } from '../../actions/postActions';\nimport PropTypes from 'prop-types';\nimport isEmpty from '../../validation/is-empty';\nconst maxPostLength = 2000;\n\nclass PostForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      text: '',\n      errors: {}\n    });\n\n    _defineProperty(this, \"onChangeHandler\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"onSubmitHandler\", e => {\n      e.preventDefault();\n      const {\n        user\n      } = this.props.auth;\n      const newPost = {\n        text: this.state.text,\n        name: user.name,\n        avatar: user.avatar // validation \n\n      };\n\n      if (newPost.text.length < maxPostLength) {\n        this.props.addPost(newPost);\n        this.setState({\n          text: ''\n        });\n      }\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.errors !== prevState.errors) {\n      return {\n        errors: nextProps.errors\n      };\n    }\n\n    return null;\n  }\n\n  render() {\n    const {\n      errors\n    } = this.state;\n    const {\n      isAuthenticated\n    } = this.props.auth;\n    const {\n      backgroundColor,\n      placeholder,\n      color\n    } = this.props;\n    return React.createElement(\"div\", {\n      className: \"PostForm\",\n      style: {\n        backgroundColor,\n        color\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"PostForm__form\",\n      onSubmit: e => this.onSubmitHandler(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"PostForm__textarea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(TextAreaFieldGroup, {\n      placeholder: isEmpty(errors.postErrors) ? placeholder : errors.postErrors.text,\n      name: \"text\",\n      value: this.state.text,\n      onChange: e => this.onChangeHandler(e) //  error={errors.text}\n      ,\n      className: \"form__textarea form__textarea-grey\",\n      rows: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"PostForm__message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.state.text.length > maxPostLength ? React.createElement(\"div\", {\n      className: \"PostForm__postLimitExceeded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, isAuthenticated ? `Post must be under ${maxPostLength} characters!` : 'Must be logged in to post') : null, this.state.text.length <= maxPostLength ? React.createElement(\"div\", {\n      className: \"PostForm__postCharacterCount\",\n      style: {\n        color\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, isAuthenticated ? `${maxPostLength - this.state.text.length} characters remaining!` : 'Must be logged in to post') : null), React.createElement(\"button\", {\n      disabled: !isAuthenticated,\n      type: \"submit\",\n      className: \"PostForm__button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nPostForm.propTypes = {\n  auth: PropTypes.object.isRequired,\n  //   errors: PropTypes.object.isRequired,\n  addPost: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps, {\n  addPost\n})(PostForm);","map":{"version":3,"sources":["C:\\Users\\arhoy\\Desktop\\cravejs\\client\\src\\components\\posts\\PostForm.js"],"names":["React","Component","connect","TextAreaFieldGroup","addPost","PropTypes","isEmpty","maxPostLength","PostForm","text","errors","e","setState","target","name","value","preventDefault","user","props","auth","newPost","state","avatar","length","getDerivedStateFromProps","nextProps","prevState","render","isAuthenticated","backgroundColor","placeholder","color","onSubmitHandler","postErrors","onChangeHandler","propTypes","object","isRequired","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport TextAreaFieldGroup from '../common/TextAreaFieldGroup';\r\nimport { addPost } from '../../actions/postActions';\r\nimport PropTypes from 'prop-types';\r\nimport isEmpty from '../../validation/is-empty';\r\n\r\nconst maxPostLength = 2000;\r\nclass PostForm extends Component {\r\n    state = {\r\n        text: '',\r\n       errors:{}\r\n    }\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        if(nextProps.errors !== prevState.errors) {\r\n            return {errors: nextProps.errors}\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    onChangeHandler = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n    onSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n        const { user } = this.props.auth;\r\n        const newPost = {\r\n            text: this.state.text,\r\n            name: user.name,\r\n            avatar: user.avatar\r\n        }\r\n    \r\n         // validation \r\n         if(newPost.text.length < maxPostLength ){\r\n            this.props.addPost(newPost);\r\n            this.setState({text:''});\r\n         }\r\n     \r\n    }\r\n    \r\n    \r\n    render() {\r\n       const {errors} = this.state;\r\n       const { isAuthenticated } = this.props.auth;\r\n       const { backgroundColor,placeholder, color } = this.props;\r\n        return (\r\n    \r\n            <div className = \"PostForm\" style = {{backgroundColor, color}} >\r\n               <form className = \"PostForm__form\" onSubmit={ (e)=> this.onSubmitHandler(e) }>\r\n                    <div className = \"PostForm__textarea\">\r\n                        <TextAreaFieldGroup\r\n                        placeholder= { isEmpty(errors.postErrors) ? placeholder : errors.postErrors.text}\r\n                        name=\"text\"\r\n                        value={this.state.text}\r\n                        onChange={ (e)=> this.onChangeHandler(e)}\r\n                        //  error={errors.text}\r\n                        className = \"form__textarea form__textarea-grey\"\r\n                        rows = {5}\r\n                        />\r\n                    </div>\r\n                 \r\n                    <div className = \"PostForm__message\">\r\n                            {\r\n                            this.state.text.length > maxPostLength ?\r\n                                <div className = \"PostForm__postLimitExceeded\">\r\n                                   {isAuthenticated ? `Post must be under ${maxPostLength} characters!` : 'Must be logged in to post'} \r\n                                </div> \r\n                            : null\r\n                        }\r\n\r\n                        {\r\n                                this.state.text.length <= maxPostLength ?\r\n                                <div className = \"PostForm__postCharacterCount\" style = {{color}}>\r\n                                   { isAuthenticated ? `${maxPostLength - this.state.text.length} characters remaining!` : 'Must be logged in to post'  } \r\n                                </div> \r\n                            : null\r\n                        }\r\n                    </div>\r\n                 \r\n                    <button disabled = {!isAuthenticated} type=\"submit\" className=\"PostForm__button\">\r\n                        Submit\r\n                    </button>\r\n                 \r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nPostForm.propTypes = {\r\n     auth: PropTypes.object.isRequired,\r\n //   errors: PropTypes.object.isRequired,\r\n    addPost:PropTypes.func.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    auth:state.auth,\r\n    errors: state.errors\r\n  });\r\n\r\n\r\nexport default connect(mapStateToProps,{ addPost })(PostForm);"]},"metadata":{},"sourceType":"module"}